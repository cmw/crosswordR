<% title "Home" %>

<% if logged_in? %>

	<div class="homeMenu shadow" >
		<div class="homeMenuSide">
			<div class="topLeftMenuCorner menuCorner"></div>
			<div class="topRightMenuCorner menuCorner"></div>

			<h3>Solutions</h3>

				<% if current_user.crossword_solutions_count > 0 %>
					<% current_user.crossword_solutions.all(:order => 'created_at DESC').each do |sol| %>
						<div>
							<%= link_to sol.crossword_puzzle.title + ' by ' + sol.crossword_puzzle.user, edit_crossword_puzzle_path(sol.crossword_puzzle) %>
						</div>
					<% end %>
				<% else %>
					<p class="text-center">You haven't attempted any puzzles yet!</p>
				<% end %>

			<div class="bottomLeftMenuCorner menuCorner"></div>
			<div class="bottomRightMenuCorner menuCorner"></div>

		</div>
		<div class="homeMenuSide">
			<div class="topLeftMenuCorner menuCorner"></div>
			<div class="topRightMenuCorner menuCorner"></div>

			<h3>Puzzles</h3>

				<% if current_user.crossword_puzzles_count > 0 %>
						<% if current_user.crossword_puzzles.where(:published => false).count > 0 %>
							Unpublished
							<% current_user.crossword_puzzles.where(:published => false).order('created_at DESC').each do |puz| %>
							<div class="homeFolderItem unpublished">
									<%= puz.title %> -- <%= puz.rows %>x<%= puz.cols %> -- <%= puz.created_at.strftime("%d %b. %Y") %>
									<%= link_to "<span class='right'>View</span>".html_safe, crossword_puzzle_path(puz) %> <%= link_to "<span class='right'>Edit</span>".html_safe, edit_crossword_puzzle_path(puz) %>
					
							</div>
							<% end %>
						<% end %>
						
						<% if current_user.crossword_puzzles.where(:published => true).count > 0 %>
							Published
							<% current_user.crossword_puzzles.where(:published => true).order('created_at DESC').each do |puz| %>
							<div class="homeFolderItem published">
									<%= puz.title %> -- <%= puz.rows %>x<%= puz.cols %> -- <%= puz.created_at.strftime("%d %b. %Y") %>
									<%= link_to "<span class='right'>View</span>".html_safe, crossword_puzzle_path(puz) %>
									<%= link_to "<span class='right'>Edit</span>".html_safe, edit_crossword_puzzle_path(puz) %>
					
							</div>
							<% end %>
						<% end %>
				<% else %>
						<p class="text-center">You haven't created any puzzles yet!</p>
				<% end %>

			<div class="bottomLeftMenuCorner menuCorner"></div>
			<div class="bottomRightMenuCorner menuCorner"></div>

		</div>
	</div>

<% else %>
		<style type="text/css">
			body {
				/*
				Image from http://1.bp.blogspot.com/-4DwniCCS8VY/T2ZyfO9FNTI/AAAAAAAAAPU/dsi7k3ux20M/s640/lenox+coffee+interior.jpg
				*/
				background: url(/assets/couchCafe.jpg) no-repeat;
				background-size: 100%;
				background-position: center 2em;
			}
			html {
				background: black;
			}
		</style>
		<div id="logged-out-welcome-container">
			<div id="welcomeBoard"></div>
			<%= form_tag sessions_path do %>
			<p>
				<%= text_field_tag :username, params[:username], :placeholder => "username", :class => "chalkboardInput subtle-input" %>
			</p>
			<p>
				<%= password_field_tag :password , nil,  :class => "chalkboardInput subtle-input", :placeholder => "password" %>
			</p>
				<%= submit_tag "LOG IN" , :class => "chalkboardButton" %>
		<% end %>
			<span>or</span><br /><br /><br />
			<%= link_to "SIGN UP".html_safe, sign_up_path, :class => "chalkboardButton" %>			
		</div>
<% end %>